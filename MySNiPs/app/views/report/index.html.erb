<%= stylesheet_link_tag "sidebar" %>
<link href='https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/9.0.0/nouislider.min.css' rel="stylesheet">
<!--
<div class="page-header">
  <h1>Report</h1>
  <small>#<%= @current_identifier || "Example" %></small>
</div>
-->
<nav class="navbar navbar-light bg-info fixed-top">
  <div class="row">
    <div class="col-2"><a class="navbar-brand" href="#menu-toggle" id="menu-toggle"><span class="navbar-toggler-icon"></span></a></div>
    <div class="col-10">
      <%= form_tag(report_index_url, method: :get, :id => 'search_card') do %>
        <div class="row">
        <% if @search == "" %>
          <input id="search" name="search" class="form-control col-10" type="search" placeholder="Pesquisar" aria-label="Pesquisar">
            <% else %>
          <input id="search" name="search" class="form-control col-10" type ="search" value = <%= @search.gsub(" ", " ") %>>
        <% end %>
        <button class="btn btn-primary fas fa-search col-2" type="submit"></button>
        </div>
    </div>
  </div>

</nav>
<div id="wrapper" class="pt-5">
        <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="#"><%= image_tag("logo.png", :style=>'height:25px;', :class=>'d-inline-block align-bottom') %></a>
                </li>
                    <li class="text-info">Filtros</li>
                    <li>Repute</li>
                    <li>
                    checked
                    <div class="form-check">
                    <% if @repute_is == true %>
                      <input id="exampleRadios1" class="form-check-input" type="radio" name="rep" value="1" checked>
                      <label class="form-check-label text-success" for="exampleRadios1">
                    <% else %>
                      <input id="exampleRadios1" class="form-check-input" type="radio" name="rep" value="1">
                      <label class="form-check-label text-success" for="exampleRadios1">
                    <% end %>
                        Good Repute
                    </label>
                    </div></li>
                    <li>
                    <div class="form-check">
                    <% if @repute_is == false %>
                      <input id="exampleRadios2" class="form-check-input" type="radio" name="rep" value="2" checked>
                      <label class="form-check-label text-danger" for="exampleRadios2">
                    <% else %>
                      <input id="exampleRadios2" class="form-check-input" type="radio" name="rep" value="2">
                      <label class="form-check-label text-danger" for="exampleRadios2">
                    <%end%>
                        Bad Repute
                    </label>
                    </div>
                    </li>
                    <li class="text-center">Magnitude</li>
                    <li><div id="slider" class="noUiSlider" style="display: block;margin-left: auto;margin-right: auto;width: 80%;"></div></li>
                    <li style="text-align:center;"><button class="btn btn-primary fas fa-search col-2" type="submit"></button></li>
                    <li><select class="form-control" id="min" name="min" style="visibility:hidden;"></select></li>
                    <li><select class="form-control" id="max" name="max" style="visibility:hidden;"></select></li>
                    
                <% end %>
                <li class="text-center">
                    <a href="#" class=" text-muted">Termos de Uso</a>
                </li>
                <li class="text-center">
                    <a href="/logout" class=" text-muted">Logout</a>
                </li>
            </ul>
    </div>
    <!-- /#sidebar-wrapper -->
    <!-- Page Content -->
    <div id="page-content-wrapper">
      <div class="container-fluid">
        <div id="cards">
          <%= render @cards %>
        </div>
        <div id="infinite-scrolling">
          <%= will_paginate @cards %>
        </div>
      </div>
    </div>
    <!-- /#page-content-wrapper -->

  </div>
  <!-- /#wrapper -->



<%= javascript_include_tag 'sidebar'%>
<script src='https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/9.0.0/nouislider.js'></script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/wnumb/1.0.4/wNumb.min.js'></script>
<script>
var slider = document.getElementById('slider');

noUiSlider.create(slider, {
    start: [0, 10],
    connect: true,
    range: {
        'min': 0,
        'max': 10
    },step:1
});
var selectmin = document.getElementById('min');
var selectmax = document.getElementById('max');

// Append the option elements
for (var i = 0; i <= 10; i++) {

    var option = document.createElement("option");
    option.text = i;
    option.value = i;

    selectmin.appendChild(option);
}
for (var i = 0; i <= 10; i++) {

    var option = document.createElement("option");
    option.text = i;
    option.value = i;

    selectmax.appendChild(option);
}


var inputNumbermin = document.getElementById('min');
var inputNumbermax = document.getElementById('max');

slider.noUiSlider.on('update', function (values, handle) {

    var value = values[handle];

    if (handle==0) {
      selectmin.value = Math.round(value);
    }
    else if(handle==1){
      selectmax.value = Math.round(value);
    }
});




selectmin.addEventListener('change', function () {
  slider.noUiSlider.set([this.value,null]);
});
selectmax.addEventListener('change', function () {
  slider.noUiSlider.set([null,this.value]);
});
</script>

</body>
